#!/bin/bash
# Version: 1.3

PAYLOAD=$(echo "IyEvYmluL2Jhc2gKIyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CiMgVXRpbGl0aWVzLnNoIGbDvHIgRml2ZU0gU2VydmVyIGluIFB0ZXJvZGFjdHlsCiMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PQoKc2V0IC1lCgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBGYXJiZW4gZsO8ciBUZXJtaW5hbC1BdXNnYWJlCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpSRUQ9J1wwMzNbMTszMW0nICAgICMgZmV0dCByb3QKR1JFRU49J1wwMzNbMTszMm0nICAjIGZldHQgZ3LDvG4KWUVMTE9XPSdcMDMzWzE7MzNtJyAjIGZldHQgZ2VsYgpCTFVFPSdcMDMzWzE7MzRtJyAgICMgZmV0dCBibGF1Ck5DPSdcMDMzWzBtJyAgICAgICAgIyBubyBjb2xvciAvIHJlc2V0CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBFTlYgYXVzIFB0ZXJvZGFjdHlsIFBhbmVsCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQppZiBbIC16ICIkUEFORUxfSE9TVCIgXTsgdGhlbgogICAgZWNobyAtZSAiJHtSRUR9RmVobGVyOiBQQU5FTF9IT1NUIGlzdCBuaWNodCBnZXNldHp0ISBCaXR0ZSBpbSBQYW5lbCBFbnZpcm9ubWVudCBWYXJpYWJsZXMgZWludHJhZ2VuLiR7TkN9IgogICAgZXhpdCAxCmZpCgppZiBbIC16ICIkUFRFUk9EQUNUWUxfQVBJX0tFWSIgXTsgdGhlbgogICAgZWNobyAtZSAiJHtSRUR9RmVobGVyOiBQVEVST0RBQ1RZTF9BUElfS0VZIGlzdCBuaWNodCBnZXNldHp0ISBCaXR0ZSBpbSBQYW5lbCBFbnZpcm9ubWVudCBWYXJpYWJsZXMgZWludHJhZ2VuLiR7TkN9IgogICAgZXhpdCAxCmZpCgppZiBbIC16ICIkU0VSVkVSX0lEIiBdOyB0aGVuCiAgICBlY2hvIC1lICIke1JFRH1GZWhsZXI6IFNFUlZFUl8nSUQgaXN0IG5pY2h0IGdlc2V0enQhIEJpdHRlIGltIFBhbmVsIEVudmlyb25tZW50IFZhcmlhYmxlcyBlaW50cmFnZW4uJHtOQ30iCiAgICBleGl0IDEKZmkKCiMgQVBJLVVSTHMgYXV0b21hdGlzY2gKVEFSR0VUX0RJUj0iL2hvbWUvY29udGFpbmVyIgpQVEVST0RBQ1RZTF9BUElfVVJMPSIkUEFORUxfSE9TVC9hcGkvY2xpZW50L3NlcnZlcnMvJFNFUlZFUl9JRC9wb3dlciIKVVBEQVRFX1ZBUklBQkxFX1VSTD0iJFBBTkVMX0hPU1QvYXBpL2NsaWVudC9zZXJ2ZXJzLyRTRVJWRVJfSUQvc3RhcnR1cC92YXJpYWJsZSIKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIFN0YW5kYXJkIFZhcmlhYmxlbgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KV0FJVD0iYXNrIiAgICMgZ2xvYmFsZXIgNSBTZWt1bmRlbiBUaW1lcgpTS0lQX1dBSVQ9ZmFsc2UKCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIE9wdGlvbmVuIHBhcnNlbgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0Kd2hpbGUgZ2V0b3B0cyAieW4iIG9wdDsgZG8KICBjYXNlICRvcHQgaW4KICAgIHkpIFNLSVBfV0FJVD10cnVlIDs7CiAgICBuKSBTS0lQX1dBSVQ9ZmFsc2UgOzsKICAgICopIGVjaG8gLWUgIiR7UkVEfVVuZ8O8bHRpZ2UgT3B0aW9uOiAtJE9QVEFSRyR7TkN9IiA+JjI7IGV4aXQgMSA7OwogIGVzYWMKZG9uZQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgR2xvYmFsZSBXYWl0LUZ1bmt0aW9uCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQp3YWl0X3RpbWVyKCkgewogICAgbG9jYWwgc2VjPSR7MTotNX0KICAgIGlmIFsgIiRTS0lQX1dBSVQiID0gZmFsc2UgXTsgdGhlbgogICAgICAgIGVjaG8gLWUgIiR7WUVMTE9XfVdhcnRlICRzZWMgU2VrdW5kZW4uLi4ke05DfSIKICAgICAgICBmb3IgaSBpbiAkKHNlcSAkc2VjIC0xIDEpOyBkbwogICAgICAgICAgICAjIGVjaG8gLWUgIiR7WUVMTE9XfSRpLi4uJHtOQ30iCiAgICAgICAgICAgIHNsZWVwIDEKICAgICAgICBkb25lCiAgICBmaQp9CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyAx77iP4oOjIFVwZGF0ZSBGdW5rdGlvbgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KdXBkYXRlX2ZpdmVtKCkgewogICAgZWNobyAtZSAiJHtCTFVFfT09PSBGaXZlTSBVcGRhdGUgPT09JHtOQ30iCiAgICBta2RpciAtcCAiJFRBUkdFVF9ESVIiCiAgICBBUlRJRkFDVFNfVVJMPSJodHRwczovL3J1bnRpbWUuZml2ZW0ubmV0L2FydGlmYWN0cy9maXZlbS9idWlsZF9wcm9vdF9saW51eC9tYXN0ZXIvIgoKICAgICMgTmV1ZXN0ZSBWZXJzaW9uIGVybWl0dGVsbgogICAgSFRNTF9DT05URU5UPSQoY3VybCAtcyAiJEFSVElGQUNUU19VUkwiKQogICAgTEFURVNUX1ZFUlNJT049JChlY2hvICIkSFRNTF9DT05URU5UIiB8IGdyZXAgLW9QICdocmVmPSJcLi9cS1swLTldKy1bYS16MC05XSsoPz0vZngudGFyLnh6KScgfCBzb3J0IC1uIHwgdGFpbCAtMSkKICAgIGlmIFsgLXogIiRMQVRFU1RfVkVSU0lPTiIgXTsgdGhlbgogICAgICAgIGVjaG8gLWUgIiR7UkVEfUZlaGxlcjogS29ubnRlIGRpZSBuZXVlc3RlIFZlcnNpb24gbmljaHQgZXJtaXR0ZWxuLiR7TkN9IgogICAgICAgIGV4aXQgMQogICAgZmkKCiAgICAjIERvd25sb2FkCiAgICBVUkw9IiR7QVJUSUZBQ1RTX1VSTH0ke0xBVEVTVF9WRVJTSU9OfS9meC50YXIueHoiCiAgICBjdXJsIC1MICIkVVJMIiAtbyAiJFRBUkdFVF9ESVIvZngudGFyLnh6IgoKICAgIGlmIHRhciAtdGYgIiRUQVJHRVRfRElSL2Z4LnRhci54eiIgPiAvZGV2L251bGwgMj4mMTsgdGhlbgogICAgICAgIHRhciAteHZmICIkVEFSR0VUX0RJUi9meC50YXIueHoiIC1DICIkVEFSR0VUX0RJUiIgPiAvZGV2L251bGwgMj4mMQogICAgICAgIGNobW9kICt4ICIkVEFSR0VUX0RJUi9ydW4uc2giCiAgICAgICAgVFJJTU1FRF9WRVJTSU9OPSQoZWNobyAiJExBVEVTVF9WRVJTSU9OIiB8IGN1dCAtZCctJyAtZjEpCiAgICAgICAgZWNobyAtZSAiJHtHUkVFTn1GaXZlTSBWZXJzaW9uICRUUklNTUVEX1ZFUlNJT04gZXJmb2xncmVpY2ggaW5zdGFsbGllcnQuJHtOQ30iCiAgICAgICAgcm0gIiRUQVJHRVRfRElSL2Z4LnRhci54eiIKCiAgICAgICAgaWYgWyAtZCAiJFRBUkdFVF9ESVIvYWxwaW5lIiBdOyB0aGVuCiAgICAgICAgICAgIGNob3duIC1SICIkKGlkIC11KTokKGlkIC1nKSIgIiRUQVJHRVRfRElSL2FscGluZSIKICAgICAgICBmaQoKICAgICAgICBpZiBbIC1mICIuL3J1bi5zaCIgXTsgdGhlbgogICAgICAgICAgICBjaG93biAiJChpZCAtdSk6JChpZCAtZykiIC4vcnVuLnNoCiAgICAgICAgZmkKCiAgICAgICAgIyBVcGRhdGUgVmFyaWFibGUgenVyw7xja3NldHplbgogICAgICAgIFJFU1BPTlNFPSQoY3VybCAtcyAtWCBQVVQgIiRVUERBVEVfVkFSSUFCTEVfVVJMIiBcCiAgICAgICAgICAgIC1IICJBdXRob3JpemF0aW9uOiBCZWFyZXIgJFBURVJPREFDVFlMX0FQSV9LRVkiIFwKICAgICAgICAgICAgLUggIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIgXAogICAgICAgICAgICAtSCAiQWNjZXB0OiBBcHBsaWNhdGlvbi92bmQucHRlcm9kYWN0eWwudjEranNvbiIgXAogICAgICAgICAgICAtZCAnewogICAgICAgICAgICAgICAgImtleSI6ICJGSVZFTV9WRVJTSU9OX1VQREFURSIsCiAgICAgICAgICAgICAgICAidmFsdWUiOiAiMCIKICAgICAgICAgICAgfScpCgogICAgICAgIGlmIGVjaG8gIiRSRVNQT05TRSIgfCBncmVwIC1xICcic2VydmVyX3ZhbHVlIjoiMCInOyB0aGVuCiAgICAgICAgICAgIGVjaG8gLWUgIiR7R1JFRU59VVBEQVRFLVZhcmlhYmxlIHd1cmRlIHdpZWRlciBEZWFrdGl2aWVydC4ke05DfSIKICAgICAgICBlbHNlCiAgICAgICAgICAgIGVjaG8gLWUgIiR7UkVEfUZlaGxlciBiZWltIFNldHplbiBkZXIgVVBEQVRFLVZhcmlhYmxlLiR7TkN9IgogICAgICAgIGZpCgogICAgICAgIHdhaXRfdGltZXIgNQoKICAgICAgICAjIFNlcnZlciBOZXVzdGFydAogICAgICAgIGN1cmwgLXMgLVggUE9TVCAiJFBURVJPREFDVFlMX0FQSV9VUkwiIFwKICAgICAgICAgICAgLUggIkF1dGhvcml6YXRpb246IEJlYXJlciAkUFRFUk9EQUNUWUxfQVBJX0tFWSIgXAogICAgICAgICAgICAtSCAiQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uIiBcCiAgICAgICAgICAgIC1IICJBY2NlcHQ6IGFwcGxpY2F0aW9uL3ZuZC5wdGVyb2RhY3R5bC52MStqc29uIiBcCiAgICAgICAgICAgIC1kICd7InNpZ25hbCI6InJlc3RhcnQifScKICAgICAgICBlY2hvIC1lICIke0dSRUVOfVNlcnZlciB3dXJkZSBuZXUgZ2VzdGFydGV0LiR7TkN9IgogICAgZWxzZQogICAgICAgIGVjaG8gLWUgIiR7UkVEfUZlaGxlcjogZngudGFyLnh6IGlzdCB1bmfDvGx0aWcuJHtOQ30iCiAgICAgICAgZXhpdCAxCiAgICBmaQp9CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyAy77iP4oOjIENhY2hlIEZ1bmt0aW9uCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjbGVhcl9jYWNoZSgpIHsKICAgIGVjaG8gLWUgIiR7QkxVRX09PT0gQ2FjaGUgbMO2c2NoZW4gPT09JHtOQ30iCiAgICBpZiBbIC1kICIkVEFSR0VUX0RJUi90eERhdGEvc2VydmVyL2NhY2hlIiBdOyB0aGVuCiAgICAgICAgcm0gLXJmICIke1RBUkdFVF9ESVJ9L3R4RGF0YS9zZXJ2ZXIvY2FjaGUvIioKICAgICAgICBlY2hvIC1lICIke0dSRUVOfUNhY2hlIGdlbMO2c2NodC4ke05DfSIKICAgIGZpCgogICAgIyBVcGRhdGUgVmFyaWFibGUgenVyw7xja3NldHplbgogICAgUkVTUE9OU0U9JChjdXJsIC1rIC1zIC1YIFBVVCAiJFVQREFURV9WQVJJQUJMRV9VUkwiIFwKICAgICAgICAtSCAiQXV0aG9yaXphdGlvbjogQmVhcmVyICRQVEVST0RBQ1RZTF9BUElfS0VZIiBcCiAgICAgICAgLUggIkNvbnRlbnQtVHlwZTogYXBwbGljYXRpb24vanNvbiIgXAogICAgICAgIC1kICd7CiAgICAgICAgICAgICJrZXkiOiAiU0VSVkVSX0NBQ0hFIiwKICAgICAgICAgICAgInZhbHVlIjogIjAiCiAgICAgICAgfScpCgogICAgaWYgZWNobyAiJFJFU1BPTlNFIiB8IGdyZXAgLXEgJyJzZXJ2ZXJfdmFsdWUiOiIwIic7IHRoZW4KICAgICAgICBlY2hvIC1lICIke0dSRUVOfUNBQ0hFLVZhcmlhYmxlIHd1cmRlIHdpZWRlciBEZWFrdGl2aWVydC4ke05DfSIKICAgIGVsc2UKICAgICAgICBlY2hvIC1lICIke1JFRH1GZWhsZXIgYmVpbSBTZXR6ZW4gZGVyIENBQ0hFLVZhcmlhYmxlLiR7TkN9IgogICAgZmkKCiAgICB3YWl0X3RpbWVyIDUKfQoKIyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCiMgM++4j+KDoyBDaGF0Zml4IC8gQ2hvd24gLyBDbGVhbnVwCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQpjaGF0Zml4X2Nob3duX2NsZWFudXAoKSB7CiAgICBEQVRFST0iLi9hbHBpbmUvb3B0L2NmeC1zZXJ2ZXIvY2l0aXplbi9zeXN0ZW1fcmVzb3VyY2VzL2NoYXQvc3ZfY2hhdC5sdWEiCgogICAgIyBCbMO2Y2tlIGF1c2tvbW1lbnRpZXJlbgogICAgaWYgWyAtZiAiJERBVEVJIiBdOyB0aGVuCiAgICAgICAgc2VkIC1pICIvQWRkRXZlbnRIYW5kbGVyKCdwbGF5ZXJKb2luaW5nJywvLC9lbmQpLyBzL14vLS0vIiAiJERBVEVJIgogICAgICAgIHNlZCAtaSAiL0FkZEV2ZW50SGFuZGxlcigncGxheWVyRHJvcHBlZCcsLywvZW5kKS8gcy9eLy0tLyIgIiREQVRFSSIKICAgIGZpCgogICAgZmluZCAuIC10eXBlIGYgISAtbmFtZSAndXRpbGl0aWVzLnNoJyAhIC1uYW1lICcucHRlcm9pZ25vcmUnIC1leGVjIGNob3duICIkKGlkIC11KTokKGlkIC1nKSIge30gKwoKICAgICMgQ2hvd24gZ2V6aWVsdCBhdWYgdXRpbGl0aWVzLnNoCiAgICBbIC1mICIkVEFSR0VUX0RJUi91dGlsaXRpZXMuc2giIF0gJiYgY2hvd24gIiQoaWQgLXUpOiQoaWQgLWcpIiAiJFRBUkdFVF9ESVIvdXRpbGl0aWVzLnNoIgoKICAgICMgQWx0ZS9jb3JlLURhdGVpZW4gZW50ZmVybmVuCiAgICBybSAtZiBjb3JlIFwKICAgICAgICAiJFRBUkdFVF9ESVIvdHhEYXRhL3NlcnZlci9jb3JlIiBcCiAgICAgICAgIiRUQVJHRVRfRElSL3R4RGF0YS9zZXJ2ZXIvLnJlcGx4eF9oaXN0b3J5Igp9CgojIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KIyBNYWluCiMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQojIEltbWVyIENoYXRmaXgvQ2hvd24vQ2xlYW51cCBhdXNmw7xocmVuCmNoYXRmaXhfY2hvd25fY2xlYW51cAoKIyBCZWZlaGxlIGF1c3dlcnRlbgpjYXNlICIkMSIgaW4KICAgIHVwZGF0ZSkKICAgICAgICB1cGRhdGVfZml2ZW0KICAgICAgICA7OwogICAgY2FjaGUpCiAgICAgICAgY2xlYXJfY2FjaGUKICAgICAgICA7OwogICAgdXBkYXRlY2FjaGV8Y2FjaGV1cGRhdGUpCiAgICAgICAgY2xlYXJfY2FjaGUKICAgICAgICB1cGRhdGVfZml2ZW0KICAgICAgICA7OwogICAgKikKICAgICMgICAgIGVjaG8gLWUgIiR7QkxVRX1Vc2FnZTogJDAge3VwZGF0ZXxjYWNoZXx1cGRhdGVjYWNoZX0gWy15fC1uXSR7TkN9IgogICAgICAgIDs7CmVzYWMK" | base64 -d)

echo "$PAYLOAD" | bash
